before:
  hooks:
  - go generate ./...

builds:
- env:
  - CGO_ENABLED=0

  goos:
  - linux

  goarch:
  - amd64
  - arm64

    #  ldflags:
    #  - -X main.Version={{.Version}} -X main.GitBranch=release-{{.Tag}} -X main.GitTag={{.Tag}} -X main.CommitHash={{.Commit}} -X main.CommitTimestamp={{.Date}} -X main.Arch=amd64 -X main.VersionStrategy=tag -X main.Os=linux -X main.GoOS={{.Env.GOOS}}

    # archive:
    #   replacements:
    #     386: i386
    #     amd64: x86_64

checksum:
  name_template: 'checksums.txt'

sign:
  artifacts: checksum

snapshot:
  name_template: "{{ .Tag }}-next"

  # nfpm:
  #   replacements:
  #     386: i386
  #     amd64: x86_64
  #   vendor: AppsCode Inc.
  #   homepage: https://appscode.com
  #   description: hello-grpc
  #   license: Apache 2.0
  # 
  #   formats:
  #   - deb
  #   - rpm
  # 
  # brew:
  #   github:
  #     owner: appscode
  #     name: homebrew-tap
  #   homepage: https://appscode.com
  #   description: hello-grpc

changelog:
  sort: asc
  filters:
    exclude:
    - '^docs:'
    - '^test:'

release:
  draft: true

dockers:
- image: tahsin/hello-grpc-amd64
  dockerfile: hack/docker/Dockerfile
  goos: linux
  goarch: amd64
  binary: hello-grpc
- image: tahsin/hello-grpc-arm64
  dockerfile: hack/docker/Dockerfile
  goos: linux
  goarch: arm64
  binary: hello-grpc
